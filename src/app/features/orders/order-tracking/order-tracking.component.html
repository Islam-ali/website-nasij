<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:bg-gray-900 py-4 sm:py-6 md:py-8 px-3 sm:px-4" [dir]="isRTL ? 'rtl' : 'ltr'">
  <!-- Header Section -->
  <div class="max-w-4xl mx-auto mb-6 sm:mb-8 md:mb-12">
    <div class="text-center relative">
      <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 dark:text-white mb-2 sm:mb-3 md:mb-4 flex items-center justify-center gap-2 sm:gap-3">
        <i class="fas fa-search-location text-primary-500 text-xl sm:text-2xl md:text-3xl"></i>
        {{ 'orderTracking.title' | translate }}
      </h1>
      <p class="text-sm sm:text-base md:text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto px-2">
        {{ 'orderTracking.subtitle' | translate }}
      </p>
    </div>
  </div>

  <!-- Search Section -->
  <div class="max-w-2xl mx-auto mb-4 sm:mb-6 md:mb-8">
    <div class="bg-white dark:bg-gray-800 rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 border border-gray-200 dark:border-gray-700">
      <form (ngSubmit)="searchOrder()">
        <div class="flex flex-col sm:flex-row gap-3 sm:gap-4">
          <input
            type="text"
            [(ngModel)]="orderNumber"
            name="orderNumber"
            class="flex-1 px-4 sm:px-5 md:px-6 py-3 sm:py-3.5 md:py-4 text-sm sm:text-base md:text-lg border-2 border-gray-300 dark:border-gray-600 rounded-lg sm:rounded-xl focus:border-primary-500 focus:ring-2 sm:focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-300 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"
            [placeholder]="'orderTracking.enterOrderNumber' | translate"
            [disabled]="loading"
          />
          <button
            type="submit"
            class="w-full sm:w-auto px-6 sm:px-7 md:px-8 py-3 sm:py-3.5 md:py-4 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white text-sm sm:text-base font-semibold rounded-lg sm:rounded-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2"
            [disabled]="loading || !orderNumber.trim()"
          >
            @if (!loading) {
            <i class="fas fa-search text-sm sm:text-base"></i>
            }
            @if (loading) {
            <i class="fas fa-spinner fa-spin text-sm sm:text-base"></i>
            }
            <span class="hidden sm:inline">{{ loading ? ('orderTracking.searching' | translate) : ('orderTracking.trackOrder' | translate) }}</span>
            <span class="sm:hidden">{{ loading ? ('orderTracking.searching' | translate) : ('orderTracking.trackOrder' | translate) }}</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Error Message -->
  @if (error) {
  <div class="max-w-2xl mx-auto mb-4 sm:mb-6 md:mb-8">
    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg sm:rounded-xl p-4 sm:p-5 md:p-6 text-center">
      <i class="fas fa-exclamation-triangle text-red-500 text-lg sm:text-xl mb-2"></i>
      <p class="text-sm sm:text-base text-red-700 dark:text-red-300 font-medium">{{ error }}</p>
    </div>
  </div>
  }

  <!-- Results Section -->
  @if (showResults && order) {
  <div class="max-w-6xl mx-auto space-y-4 sm:space-y-6 md:space-y-8 lg:space-y-10">
    <!-- Order Summary -->
    <section class="bg-white/95 dark:bg-gray-900/80 backdrop-blur rounded-xl sm:rounded-2xl md:rounded-3xl border border-primary-100/60 dark:border-primary-800/50 overflow-hidden">
      <div class="bg-gradient-to-r from-primary-500 via-primary-600 to-primary-700 px-4 sm:px-6 md:px-8 lg:px-12 py-4 sm:py-5 md:py-6 lg:py-8">
        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 sm:gap-5 md:gap-6">
          <div class="flex-1">
            <p class="text-xs sm:text-sm uppercase tracking-[0.2em] sm:tracking-[0.3em] text-white/70 mb-1 sm:mb-2">
              {{ 'orderTracking.title' | translate }}
            </p>
            <h3 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-white flex flex-wrap items-center gap-2 sm:gap-3">
              <i class="fas fa-receipt text-white/80 text-lg sm:text-xl md:text-2xl"></i>
              <span class="text-sm sm:text-base md:text-lg lg:text-xl">{{ 'orderTracking.orderNumber' | translate }}</span>
              <span class="px-2 sm:px-3 py-1 rounded-full bg-white/15 text-white/90 text-xs sm:text-sm md:text-base lg:text-lg font-semibold">
                {{ order.orderNumber }}
              </span>
            </h3>
            <div class="mt-3 sm:mt-4 flex flex-col sm:flex-row sm:flex-wrap items-start sm:items-center gap-2 sm:gap-3 md:gap-4 text-white/80 text-xs sm:text-sm md:text-base">
              <span class="inline-flex items-center gap-1.5 sm:gap-2">
                <i class="fas fa-calendar-alt text-xs sm:text-sm"></i>
                <span>{{ 'orderTracking.orderDate' | translate }} {{ formatDateTime(order.date) }}</span>
              </span>
              @if(order.trackingNumber) {
              <span class="inline-flex items-center gap-1.5 sm:gap-2">
                <i class="fas fa-shipping-fast text-xs sm:text-sm"></i>
                <span>{{ 'orderTracking.trackingNumber' | translate }} {{ order.trackingNumber }}</span>
              </span>
              }
            </div>
          </div>
          <div class="flex flex-wrap items-center gap-2 sm:gap-3">
            <span class="px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-semibold uppercase tracking-wide bg-white/20 text-white">
              {{ 'paymentStatus.' + order.paymentStatus | translate }}
            </span>
            @if(order.isDeposit) {
            <span class="px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-semibold bg-white/20 text-white">
              {{ 'orderTracking.depositBadge' | translate }}
            </span>
            }
          </div>
        </div>
      </div>
      <div class="p-4 sm:p-6 md:p-8 lg:p-10 space-y-4 sm:space-y-6 md:space-y-8">
        <div class="grid gap-4 sm:gap-5 md:gap-6 grid-cols-1 md:grid-cols-2 xl:grid-cols-3">
          <div class="rounded-xl sm:rounded-2xl border border-primary-100 dark:border-primary-900/60 bg-primary-50/70 dark:bg-primary-900/10 p-4 sm:p-5 md:p-6">
            <div class="flex items-center justify-between mb-3 sm:mb-4">
              <span class="inline-flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-xl sm:rounded-2xl bg-primary-500/15 text-primary-600 dark:text-primary-300">
                <i class="pi pi-bolt text-lg sm:text-xl"></i>
              </span>
              <span class="px-2 sm:px-3 py-1 rounded-full text-xs uppercase font-semibold tracking-wide"
                    [ngClass]="getStatusClass(order.status)">
                {{ 'orderStatus.' + order.status | translate }}
              </span>
            </div>
            <h4 class="text-xs sm:text-sm font-semibold text-primary-700 dark:text-primary-300 uppercase tracking-widest mb-1">
              {{ 'orderTracking.currentStage' | translate }}
            </h4>
            <p class="text-base sm:text-lg bg-primary-100/25 p-2 rounded-lg font-semibold text-gray-900 dark:text-gray-50">
              {{ 'orderTracking.status.' + order.status | translate }}
            </p>
            <p class="text-xs sm:text-sm text-gray-600 dark:text-gray-300 mt-2 sm:mt-3 leading-relaxed">
              {{ 'orderTracking.timeline.' + order.status | translate }}
            </p>
          </div>

          <div class="rounded-xl sm:rounded-2xl border border-primary-100 dark:border-primary-900/60 bg-primary-50/60 dark:bg-primary-900/15 p-4 sm:p-5 md:p-6">
            <div class="flex items-center justify-between mb-3 sm:mb-4">
              <span class="inline-flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-xl sm:rounded-2xl bg-primary-500/15 text-primary-600 dark:text-primary-300">
                <i class="pi pi-wallet text-lg sm:text-xl"></i>
              </span>
              <span class="px-2 sm:px-3 py-1 rounded-full text-xs font-semibold bg-white/70 text-primary-700 dark:bg-primary-800/50 dark:text-primary-300">
                {{ 'orderTracking.paymentSummary' | translate }}
              </span>
            </div>
            <h4 class="text-xs sm:text-sm font-semibold text-primary-700 dark:text-primary-300 uppercase tracking-widest mb-1">
              {{ 'orderTracking.amountPaid' | translate }}
            </h4>
            <p class="text-2xl sm:text-3xl font-bold text-primary-600 dark:text-primary-300">
              {{ getAmountPaid() | currency }}
            </p>
            <div class="mt-2 sm:mt-3 space-y-1.5 sm:space-y-2 text-xs sm:text-sm text-gray-600 dark:text-gray-300">
              <p class="flex items-center gap-1.5 sm:gap-2">
                <i class="pi pi-credit-card text-primary-500 text-sm sm:text-base"></i>
                <span class="break-words">{{ 'orderTracking.paymentMethod' | translate }}: 
                <span class="font-semibold text-gray-800 dark:text-gray-100">
                  {{ 'paymentMethod.' + order.paymentMethod | translate }}
                </span></span>
              </p>
              @if (hasOutstandingBalance()) {
              <p class="flex items-center gap-1.5 sm:gap-2 text-primary-600 dark:text-primary-300">
                <i class="pi pi-exclamation-circle text-primary-500 text-sm sm:text-base"></i>
                <span class="break-words">{{ 'orderTracking.remainingBalance' | translate }}:
                <span class="font-semibold">{{ getOutstandingAmount() | currency }}</span></span>
              </p>
              }
              @if (!hasOutstandingBalance()) {
              <p class="flex items-center gap-1.5 sm:gap-2 text-primary-600 dark:text-primary-300">
                <i class="pi pi-check-circle text-primary-500 text-sm sm:text-base"></i>
                {{ 'orderTracking.paidBadge' | translate }}
              </p>
              }
            </div>
          </div>

          <div class="rounded-xl sm:rounded-2xl border border-primary-100 dark:border-primary-900/60 bg-primary-50/50 dark:bg-primary-900/10 p-4 sm:p-5 md:p-6">
            <div class="flex items-center justify-between mb-3 sm:mb-4">
              <span class="inline-flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-xl sm:rounded-2xl bg-primary-500/15 text-primary-600 dark:text-primary-300">
                <i class="pi pi-compass text-lg sm:text-xl"></i>
              </span>
              <span class="px-2 sm:px-3 py-1 rounded-full text-xs font-semibold bg-white/70 text-primary-700 dark:bg-primary-800/50 dark:text-primary-300">
                {{ 'orderTracking.shippingOverview' | translate }}
              </span>
            </div>
            <div class="space-y-2 sm:space-y-3 text-xs sm:text-sm text-gray-600 dark:text-gray-300">
              <p class="flex items-center gap-1.5 sm:gap-2">
                <i class="pi pi-truck text-primary-500 text-sm sm:text-base"></i>
                <span class="break-words">{{ 'common.shipping' | translate }}:
                <span class="font-semibold text-gray-800 dark:text-gray-100">
                  {{ getShippingAmount() | currency }}
                </span></span>
              </p>
              <p class="flex items-center gap-1.5 sm:gap-2">
                <i class="pi pi-percentage text-primary-500 text-sm sm:text-base"></i>
                <span class="break-words">{{ 'common.tax' | translate }}:
                <span class="font-semibold text-gray-800 dark:text-gray-100">
                  {{ getTaxAmount() | currency }}
                </span></span>
              </p>
              @if(order.notes) {
              <p class="flex items-center gap-1.5 sm:gap-2 text-primary-600 dark:text-primary-300">
                <i class="pi pi-comment text-primary-500 text-sm sm:text-base"></i>
                {{ 'orderTracking.notesAvailable' | translate }}
              </p>
              }
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="grid gap-4 sm:gap-6 md:gap-8 xl:grid-cols-3">
      <div class="space-y-4 sm:space-y-6 md:space-y-8 xl:col-span-2">
        <!-- Timeline -->
        <section class="bg-white dark:bg-gray-900/80 rounded-xl sm:rounded-2xl md:rounded-3xl border border-primary-100 dark:border-primary-900/50 overflow-hidden">
          <div class="px-4 sm:px-6 md:px-8 py-4 sm:py-5 md:py-6 border-b border-gray-100 dark:border-gray-800 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4">
            <h4 class="text-base sm:text-lg md:text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2 sm:gap-3">
              <i class="pi pi-map-marker text-primary-500 text-base sm:text-lg md:text-xl"></i>
              {{ 'orderTracking.timelineHeading' | translate }}
            </h4>
            @if (shouldShowTimeline()) {
            <span class="text-xs sm:text-sm font-semibold text-primary-600 dark:text-primary-300">
              {{ 'orderTracking.currentStage' | translate }} : 
              <span class="font-semibold px-3 py-1 rounded-full bg-primary-100 text-primary-700 dark:bg-primary-900/40 dark:text-primary-300 w-fit">
                  {{ 'orderTracking.status.' + order.status | translate }}
              </span>
            </span>
            }
          </div>
          <div class="p-4 sm:p-6 md:p-8">
            @if(shouldShowTimeline()) {
            <div class="relative pl-6 sm:pl-8 md:pl-12">
              <span class="absolute left-3 sm:left-4 md:left-5 top-0 bottom-0 w-px bg-gradient-to-b from-primary-200 via-primary-100 to-transparent dark:from-primary-900/40 dark:via-primary-900/30"></span>
              <div class="space-y-6 sm:space-y-8">
                @for(step of statusSteps; track step; let idx = $index) {
                <div class="relative flex items-start gap-3 sm:gap-4 md:gap-6">
                  <div class="relative z-10">
                    <span
                      class="flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full border-2 transition-all duration-300"
                      [ngClass]="{
                        'bg-primary-500 text-white border-primary-500 shadow-primary-200/70': isStepActive(step),
                        'bg-primary-100 text-primary-700 border-primary-200 dark:bg-primary-900/30 dark:text-primary-300 dark:border-primary-800': isStepCompleted(step),
                        'bg-gray-100 text-gray-400 border-gray-200 dark:bg-gray-800 dark:text-gray-500 dark:border-gray-700': !isStepActive(step) && !isStepCompleted(step)
                      }">
                      <i [class]="getStatusIcon(step)" class="text-sm sm:text-base"></i>
                    </span>
                    @if(idx < statusSteps.length - 1) {
                    <span class="absolute left-1/2 -bottom-6 sm:-bottom-8 translate-x-[-50%] w-px h-6 sm:h-8 bg-gray-200 dark:bg-gray-700"></span>
                    }
                  </div>
                  <div class="space-y-1.5 sm:space-y-2 flex-1">
                    <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3">
                      <p class="text-xs sm:text-sm font-semibold uppercase tracking-wide text-gray-700 dark:text-gray-200">
                        {{ 'orderTracking.status.' + step | translate }}
                      </p>
                      @if(isStepActive(step)) {
                      <span class="px-2 sm:px-3 py-1 rounded-full text-xs font-semibold bg-primary-100 text-primary-700 dark:bg-primary-900/40 dark:text-primary-300 w-fit">
                        {{ 'orderTracking.currentStage' | translate }}
                      </span>
                      }
                    </div>
                    <p class="text-xs sm:text-sm text-gray-600 dark:text-gray-400 leading-relaxed">
                      {{ 'orderTracking.timeline.' + step | translate }}
                    </p>
                  </div>
                </div>
                }
              </div>
            </div>
            } @else {
            <div class="text-center py-6 sm:py-8 md:py-10 text-gray-600 dark:text-gray-300">
              <i class="pi pi-info-circle text-2xl sm:text-3xl text-blue-400 mb-3 sm:mb-4"></i>
              <p class="text-sm sm:text-base font-semibold mb-1 sm:mb-2">{{ 'orderTracking.noTimelineAvailable' | translate }}</p>
              <p class="text-xs sm:text-sm">{{ 'orderTracking.timelineWillUpdate' | translate }}</p>
            </div>
            }
          </div>
        </section>

        <!-- Order Items -->
        @if(order.items && order.items.length > 0) {
        <section class="bg-white dark:bg-gray-900/80 rounded-xl sm:rounded-2xl md:rounded-3xl border border-primary-100 dark:border-primary-900/50 overflow-hidden">
          <div class="px-4 sm:px-6 md:px-8 py-4 sm:py-5 md:py-6 border-b border-gray-100 dark:border-gray-800">
            <h4 class="text-base sm:text-lg md:text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2 sm:gap-3">
              <i class="pi pi-shopping-cart text-primary-500 text-base sm:text-lg md:text-xl"></i>
              {{ 'orderTracking.requestedProducts' | translate }}
            </h4>
          </div>
          <div class="divide-y divide-gray-100 dark:divide-gray-800">
            @for (item of order.items; track $index) {
            <div class="p-4 sm:p-5 md:p-6 flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-5 md:gap-6">
              <div class="relative flex-shrink-0">
                <div class="w-20 h-20 sm:w-24 sm:h-24 rounded-xl sm:rounded-2xl bg-gradient-to-br from-gray-100 via-white to-gray-100 dark:bg-gray-800 flex items-center justify-center overflow-hidden shadow-inner border border-gray-200 dark:border-gray-700">
                  @if (item.itemId && item.itemId.images && item.itemId.images.length > 0) {
                  <img
                    [src]="getImageUrl(item.itemId.images[0].filePath)"
                    [alt]="item.itemId ? (item.itemId.name | multiLanguage) : ''"
                    class="w-full h-full object-cover"
                    (error)="onImageError($event)"
                    (load)="onImageLoad($event)"
                  >
                  }
                  @if (!item.itemId || !item.itemId.images || item.itemId.images.length === 0) {
                  <div class="w-full h-full flex items-center justify-center text-2xl sm:text-3xl text-gray-400 dark:text-gray-500">
                    <i class="fas fa-box"></i>
                  </div>
                  }
                </div>
                <span class="absolute -top-2 -right-2 sm:-top-3 sm:-right-3 px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-xs font-semibold shadow-md"
                      [ngClass]="item.itemType === 'Package' ? 'bg-primary-100 text-primary-700 dark:bg-primary-900/50 dark:text-primary-300' : 'bg-primary-200 text-primary-800 dark:bg-primary-900/30 dark:text-primary-100'">
                  {{ item.itemType === 'Package' ? ('orderTracking.packageBadge' | translate) : ('orderTracking.productBadge' | translate) }}
                </span>
              </div>
              <div class="flex-1 space-y-2 sm:space-y-3 min-w-0">
                <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-3">
                  <h5 class="text-base sm:text-lg font-bold text-gray-900 dark:text-gray-100 break-words">
                    {{ item.itemId ? (item.itemId.name | multiLanguage) : '' }}
                  </h5>
                  <div class="text-left sm:text-right flex-shrink-0">
                    <p class="text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-50">
                      {{ (item.price * item.quantity) | currency }}
                    </p>
                    @if(item.quantity > 1) {
                    <p class="text-xs sm:text-sm text-gray-500 dark:text-gray-400">
                      {{ item.price | currency }} Ã— {{ item.quantity }}
                    </p>
                    }
                  </div>
                </div>
                <div class="flex flex-wrap items-center gap-2 sm:gap-3 text-xs sm:text-sm text-gray-600 dark:text-gray-300">
                  <span class="inline-flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-1 rounded-full bg-primary-50 dark:bg-primary-900/40">
                    <i class="pi pi-hashtag text-primary-400 text-xs sm:text-sm"></i>
                    {{ 'common.quantity' | translate }}: <strong>{{ item.quantity }}</strong>
                  </span>
                  @if(getSkuForItem(item); as sku) {
                  <span class="inline-flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-1 rounded-full bg-primary-50 dark:bg-primary-900/40">
                    <i class="pi pi-tag text-primary-400 text-xs sm:text-sm"></i>
                    <span class="break-all">{{ sku }}</span>
                  </span>
                  }
                </div>
              </div>
            </div>
            }
          </div>
        </section>
        }
      </div>

      <div class="space-y-4 sm:space-y-6 md:space-y-8">
        <!-- Payment Breakdown -->
        <section class="bg-white dark:bg-gray-900/80 rounded-xl sm:rounded-2xl md:rounded-3xl border border-primary-100 dark:border-primary-900/50 overflow-hidden">
          <div class="px-4 sm:px-6 md:px-8 py-4 sm:py-5 md:py-6 border-b border-gray-100 dark:border-gray-800">
            <h4 class="text-base sm:text-lg md:text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2 sm:gap-3">
              <i class="pi pi-credit-card text-primary-500 text-base sm:text-lg md:text-xl"></i>
              {{ 'orderTracking.paymentDetails' | translate }}
            </h4>
          </div>
          <div class="p-4 sm:p-6 md:p-8 space-y-3 sm:space-y-4 md:space-y-5 text-xs sm:text-sm">
            <div class="flex justify-between items-center text-gray-600 dark:text-gray-300">
              <span>{{ 'orderTracking.paymentMethod' | translate }}</span>
              <span class="font-semibold text-gray-900 dark:text-gray-100">
                {{ 'paymentMethod.' + order.paymentMethod | translate }}
              </span>
            </div>
            <div class="flex justify-between items-center text-gray-600 dark:text-gray-300">
              <span>{{ 'orderTracking.isDeposit' | translate }}</span>
              <span class="font-semibold text-gray-900 dark:text-gray-100">
                {{ (order.isDeposit ? 'common.yes' : 'common.no') | translate }}
              </span>
            </div>
            <hr class="border-dashed border-gray-200 dark:border-gray-800">
            <div class="flex justify-between items-center text-gray-600 dark:text-gray-300">
              <span>{{ 'common.subtotal' | translate }}</span>
              <span class="font-semibold text-gray-900 dark:text-gray-100">
                {{ getSubtotal() | currency }}
              </span>
            </div>
            <div class="flex justify-between items-center text-gray-600 dark:text-gray-300">
              <span>{{ 'common.shipping' | translate }}</span>
              <span class="font-semibold text-gray-900 dark:text-gray-100">
                {{ getShippingAmount() | currency }}
              </span>
            </div>
            <div class="flex justify-between items-center text-gray-600 dark:text-gray-300">
              <span>{{ 'common.tax' | translate }}</span>
              <span class="font-semibold text-gray-900 dark:text-gray-100">
                {{ getTaxAmount() | currency }}
              </span>
            </div>
            @if(hasDiscount()) {
            <div class="flex justify-between items-center text-gray-600 dark:text-gray-300">
              <span>{{ 'common.discount' | translate }}</span>
              <span class="font-semibold text-emerald-600 dark:text-emerald-300">
                -{{ getDiscountAmount() | currency }}
              </span>
            </div>
            }
            <div class="flex justify-between items-center text-gray-600 dark:text-gray-300">
              <span>{{ 'orderTracking.amountPaid' | translate }}</span>
              <span class="font-semibold text-primary-600 dark:text-primary-300">
                {{ getAmountPaid() | currency }}
              </span>
            </div>
            @if(hasOutstandingBalance()) {
            <div class="flex justify-between items-center text-gray-600 dark:text-gray-300">
              <span>{{ 'orderTracking.remainingBalance' | translate }}</span>
              <span class="font-semibold text-primary-600 dark:text-primary-300">
                {{ getOutstandingAmount() | currency }}
              </span>
            </div>
            }
            <div class="pt-3 sm:pt-4 mt-3 sm:mt-4 border-t border-gray-200 dark:border-gray-800 flex justify-between items-center">
              <span class="text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100">
                {{ 'common.total' | translate }}
              </span>
              <span class="text-xl sm:text-2xl font-bold text-primary-600 dark:text-primary-300">
                {{ order.total | currency }}
              </span>
            </div>
          </div>
        </section>

        <!-- Shipping Details -->
        @if(order.shippingAddress) {
        <section class="bg-white dark:bg-gray-900/80 rounded-xl sm:rounded-2xl md:rounded-3xl border border-primary-100 dark:border-primary-900/50 overflow-hidden">
          <div class="px-4 sm:px-6 md:px-8 py-4 sm:py-5 md:py-6 border-b border-gray-100 dark:border-gray-800">
            <h4 class="text-base sm:text-lg md:text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2 sm:gap-3">
              <i class="pi pi-map text-primary-500 text-base sm:text-lg md:text-xl"></i>
              {{ 'orderTracking.shippingDetails' | translate }}
            </h4>
          </div>
          <div class="p-4 sm:p-6 md:p-8 space-y-4 sm:space-y-5 text-xs sm:text-sm text-gray-600 dark:text-gray-300">
            <div>
              <p class="text-xs uppercase tracking-[0.2em] sm:tracking-[0.3em] text-gray-400 dark:text-gray-500">
                {{ 'orderTracking.recipient' | translate }}
              </p>
              <p class="text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100 mt-1 break-words">
                {{ order.shippingAddress.fullName  }}
              </p>
            </div>
            <div>
              <p class="text-xs uppercase tracking-[0.2em] sm:tracking-[0.3em] text-gray-400 dark:text-gray-500">
                {{ 'orderTracking.contact' | translate }}
              </p>
              <p class="text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100 mt-1 break-words">
                {{ order.shippingAddress.phone  }}
              </p>
            </div>
            <div>
              <p class="text-xs uppercase tracking-[0.2em] sm:tracking-[0.3em] text-gray-400 dark:text-gray-500">
                {{ 'orderTracking.deliveryAddress' | translate }}
              </p>
              <p class="text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100 mt-1 leading-relaxed break-words">
                {{ order.shippingAddress.address }}
                <br>
                {{ order.shippingAddress.city }}, {{ order.shippingAddress.state.name | multiLanguage }}
                , {{ order.shippingAddress.country.name | multiLanguage }}
              </p>
            </div>
          </div>
        </section>
        }

        <!-- Notes -->
        <section class="bg-white dark:bg-gray-900/80 rounded-xl sm:rounded-2xl md:rounded-3xl border border-primary-100 dark:border-primary-900/50 overflow-hidden">
          <div class="px-4 sm:px-6 md:px-8 py-4 sm:py-5 md:py-6 border-b border-gray-100 dark:border-gray-800 flex items-center gap-2 sm:gap-3">
            <i class="pi pi-comment text-primary-500 text-base sm:text-lg md:text-xl"></i>
            <h4 class="text-base sm:text-lg md:text-xl font-bold text-gray-900 dark:text-gray-100">
              {{ 'orderTracking.notesTitle' | translate }}
            </h4>
          </div>
          <div class="p-4 sm:p-6 md:p-8">
            @if(order.notes) {
            <p class="text-xs sm:text-sm md:text-base leading-relaxed text-gray-700 dark:text-gray-200 break-words">
              {{ order.notes }}
            </p>
            } @else {
            <p class="text-xs sm:text-sm text-gray-500 dark:text-gray-400">
              {{ 'orderTracking.noNotes' | translate }}
            </p>
            }
          </div>
        </section>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex justify-center pt-4 sm:pt-6">
      <button
        class="w-full sm:w-auto bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white px-6 sm:px-8 md:px-10 py-3 sm:py-3.5 md:py-4 rounded-xl sm:rounded-2xl text-sm sm:text-base font-semibold transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 sm:gap-3"
        (click)="clearSearch()"
      >
        <i class="pi pi-search text-sm sm:text-base"></i>
        {{ 'orderTracking.searchForAnotherOrder' | translate }}
      </button>
    </div>
  </div>
  }

  <!-- No Results Message -->
  @if (showResults && !order) {
  <div class="max-w-2xl mx-auto px-3 sm:px-4">
    <div class="bg-white dark:bg-gray-800 rounded-xl sm:rounded-2xl border border-primary-100 dark:border-primary-900/50 p-6 sm:p-8 md:p-12 text-center">
      <i class="fas fa-search text-gray-400 text-4xl sm:text-5xl md:text-6xl mb-4 sm:mb-5 md:mb-6"></i>
      <h5 class="text-xl sm:text-2xl font-bold text-gray-700 dark:text-gray-300 mb-3 sm:mb-4">{{ 'orderNotFound' | translate }}</h5>
      <p class="text-sm sm:text-base text-gray-500 dark:text-gray-400 mb-6 sm:mb-8">{{ 'checkOrderNumber' | translate }}</p>
      <button 
        class="w-full sm:w-auto bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-lg sm:rounded-xl text-sm sm:text-base font-semibold transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 sm:gap-3 mx-auto"
        (click)="clearSearch()"
      >
        <i class="fas fa-search text-sm sm:text-base"></i>
        {{ 'newSearch' | translate }}
      </button>
    </div>
  </div>
  }
</div>  